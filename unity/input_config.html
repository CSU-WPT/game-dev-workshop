<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Setting up Input - The CPT&#x27;s Game Development Workshop</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The CPT&#x27;s Game Development Workshop</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h3 id="input-configuration"><a class="header" href="#input-configuration">Input Configuration</a></h3>
<ul>
<li>
<p>For this tutorial, we will be using the new Unity Input system.</p>
</li>
<li>
<p>Those w/ prior Unity experience may still know how inputs were taken from the user before the addition of the new system (done mostly within code)</p>
</li>
<li>
<p>However, with the new system, we can easily configure different actions for our player asset with custom made action maps and key bindings (you can even configure controllers!)</p>
</li>
</ul>
<h5 id="quick-disclaimer"><a class="header" href="#quick-disclaimer">Quick disclaimer:</a></h5>
<ul>
<li>Unity, as part of the new input system, provides an auto-generated input actions asset called <strong>InputSystem_Actions.inputactions</strong>.</li>
<li>This comes with a lot of presets already assigned for character movement and UI navigation.</li>
<li>If you prefer to use it, then skip to step 10. Otherwise, continue onward.</li>
</ul>
<h5 id="lets-get-started"><a class="header" href="#lets-get-started">Let's get started!</a></h5>
<br/>
<ol>
<li>Navigate out of the <strong>updated_assets</strong> folder (if you're following along from the previous page) into the <strong>Assets</strong> folder.
<br/></li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_6.png" alt="Unity Editor Home Page">
<ol start="2">
<li>In the Assets folder in the File View below, right-click, hover over <em>Create</em> and find the <strong>Input Actions</strong> option. Click it to create a new Input Actions Asset.
<ul>
<li>Unity will prompt you to enter a new name for it.</li>
<li>I named mine "Player_Control" but you can name it whatever you want. Henceforth, I will refer to it using this name</li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_7.png" alt="Unity Editor Home Page">
<ol start="3">
<li>On the right, in the Component Panel, click <strong>Assign as the Project-wide Input Actions</strong>. This ensures that our inputs stay consistent and that we don't run into any unexpected errors.</li>
</ol>
<br/>
<p>Now, double-click <strong>Player_Control</strong> to open it in a separate window and dock it next to the <em>Scene</em> and <em>Game</em> view.</p>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_8.png" alt="Unity Editor Home Page">
<ol start="4">
<li>On the left, in the <strong>Action Maps</strong> panel, create a new action map called <strong>Player</strong> by clicking the plus icon in the top right corner of the panel.
<ul>
<li>
<p>Name it <strong>Player</strong></p>
</li>
<li>
<p>An action map is essentially a container that holds bindings (either for a keyboard or for a controller). Once established, this action map (and its associated bindings) can be assigned to whatever asset we want (like <strong>jearl_backwards</strong>).
<br/></p>
</li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_10.png" alt="Unity Editor Home Page">
<ol start="5">
<li>On the rightmost panel (called <strong>Action Properties</strong>), change the action type to <strong>Value</strong>.
<ul>
<li>The reason is because, conventionally, movement in games is always done by pressing and holding a button (i.e. it generates a <em>continuous</em> value like "WWWWWWWWW..." for forward movement) unlike jumping, for example, where we press once and don't hold.</li>
<li>The game engine (and our script) will read that continuous string of W's, interpret it to mean forward movement and, consequently, move our player forward so long as it keeps getting those continuous W's.
<ul>
<li>It's not exactly like this but hopefully you get the idea 😁
<br/></li>
</ul>
</li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_11.png" alt="Unity Editor Home Page">
<ol start="6">
<li>
<p>In the additional dropdown menu that is spawned underneath <em>Action Type</em> (called <strong>Control Type</strong>), change its value to <strong>Vector 2</strong>.</p>
<ul>
<li>This is because our <strong>movement</strong> is only in 2 directions (the x-axis and the z-axis). This is unlike Creative Mode in Minecraft, for example, where we can freely move in any direction.
<ul>
<li>We will move in the y-axis (via jumping) but <strong>not</strong> with continuous movement.
<br/></li>
</ul>
</li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_12.png" alt="Unity Editor Home Page">
<ol start="7">
<li>In the center panel (called <strong>Actions</strong>), where it says <em>New Action</em>, rename it to <strong>Movement</strong>.
<ul>
<li>Then, click the small <strong>plus</strong> icon next to Movement (all the way on the right)</li>
<li>In the menu that pops up, click <strong>Add Up\Down\Left\Right Composite</strong>.
<ul>
<li>If an additional item called <strong>No Binding</strong> is created, delete it.</li>
</ul>
</li>
<li>This will automatically create placeholders for 4 movement bindings (for, say, W-A-S-D) and bind/aggregate them into a single 2D vector.
<ul>
<li>I haven't tried this yet but you could try manually creating each key binding (without creating the composite). However, you will have to aggregate them yourself in a C# script.</li>
<li>Using the composite, therefore, will result in less headaches and a cleaner setup.
<br/></li>
</ul>
</li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_13.png" alt="Unity Editor Home Page">
<ol start="8">
<li>Expand the dropdown menu of the newly created <em>2D Vector</em> to show the 4 empty bindings.
<ul>
<li>Now, for each binding:
<ul>
<li>Click on it in the center panel</li>
<li>On the right, open the <em>Path</em> dropdown.</li>
<li>Here, either search for the key to attach to this binding <strong>or</strong> click the <em>Listen</em> button and press the key you'd wish to attach and it will pop up in the dropdown below.</li>
<li>Click your desired key to attach it to the <em>Up</em> binding.</li>
<li>Repeat for all 4 bindings.
<br/></li>
</ul>
</li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_14.png" alt="Unity Editor Home Page">
<ol start="9">
<li>Up top, in the right corner, click <em>Save Asset</em> to save changes.
<br/></li>
</ol>
<br/>
<div id='step_10'>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_15.png" alt="Unity Editor Home Page">
<ol start="10">
<li>Click on the <strong>Scene</strong> tab to navigate back to the Scene View.
<ul>
<li>Click on <strong>jearl_backwards</strong> in the Scene View itself (or in the Scene Pane on the left)</li>
<li>In its component panel (on the right), we will add a <strong>Player Input</strong> component to attach our newly made action map and key bindings to our player asset.
<ul>
<li>In the component panel, clikc <strong>Add Component</strong> (usually at the bottom)</li>
<li>In the search bar, start typing <strong>Player Input</strong> and you'll see it below.</li>
<li>Click it to add it to the <strong>jearl_backwards</strong> asset.</li>
</ul>
</li>
<li>Notice that Unity will automatically assign our custom-made Input Actions asset here to the <strong>Actions</strong> attribute.
<ul>
<li>If it didn't, drag and drop the newly created Action Map into the <strong>Actions</strong> attribute.</li>
<li>In the <strong>Player Input</strong> component, The <em>Default Map</em> attribute (below the <em>Actions</em> attribute) will be <em>Player</em> *(referring to the binding map we made earlier).</li>
</ul>
</li>
</ul>
</li>
</ol>
</div>
<br/>
<h4 id="now-its-time-to-put-all-this-together-in-a-c-script"><a class="header" href="#now-its-time-to-put-all-this-together-in-a-c-script">Now, it's time to put all this together in a C# script.</a></h4>
<br/>
<h4 id="but-first-we-need-to-set-up-our-code-editors"><a class="header" href="#but-first-we-need-to-set-up-our-code-editors">But, first, we need to set up our code editors.</a></h4>
<ul>
<li>For Mac, we are gonna have to use <a href="./IDE_setup/VSCode_setup.html"><strong>Visual Studio Code</strong></a>.</li>
<li>For Windows, you guys are free to choose between VS Code and <a href="./IDE_setup/Visual_Studio.html"><strong>Visual Studio</strong></a> (the purple one).</li>
</ul>
<h4 id="for-this-tutorial-as-a-mac-user-i-will-use-vs-code-but-feel-free-to-use-whatever-is-the-most-convenient"><a class="header" href="#for-this-tutorial-as-a-mac-user-i-will-use-vs-code-but-feel-free-to-use-whatever-is-the-most-convenient">For this tutorial, as a Mac user, I will use VS Code. But, feel free to use whatever is the most convenient.</a></h4>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_16.png" alt="Unity Editor Home Page">
<ol start="11">
<li>Click on <strong>jearl_backwards</strong>
<ul>
<li>In its component panel, at the bottom, click <em>Add Component</em></li>
<li>In the search bar, start typing <em>New Script</em>
<ul>
<li>You should see the option shown in the image above.</li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_17.png" alt="Unity Editor Home Page">
<ol start="12">
<li>Name the script something like <em>Player_Movement</em>. Then, click Create and Add. This will create the script and add it as a component to this object (jearl_backwards)</li>
</ol>
<br/>
<h4 id="now-when-you-double-click-the-script-inside-the-script-component-or-in-the-assets-folder-assuming-you-set-up-your-respective-ide-correctly-it-should-automatically-open-the-script-in-said-ide-for-me-in-vscode-it-looks-something-like-this"><a class="header" href="#now-when-you-double-click-the-script-inside-the-script-component-or-in-the-assets-folder-assuming-you-set-up-your-respective-ide-correctly-it-should-automatically-open-the-script-in-said-ide-for-me-in-vscode-it-looks-something-like-this">Now, when you double-click the script (inside the script component or in the <em>Assets</em> folder), assuming you set up your respective IDE correctly, it should automatically open the script in said IDE. For me, in VSCode, it looks something like this:</a></h4>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_18.png" alt="Unity Editor Home Page">
<p><br><br></p>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_19.png" alt="Unity Editor Home Page">
<ol start="13">
<li>In the Update function, type <em>MovePlayer()</em> (we'll define this function later).
<ul>
<li>This function, as per the description of the Update() function, will run once per frame of gameplay.</li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_20_fixed.png" alt="Unity Editor Home Page">
<ol start="14">
<li>Add three variables before Start() but inside our main method:
<ul>
<li><em>public float speed</em>
<ul>
<li>This will dictate the speed of our player object's movement</li>
<li>Since this variable is <strong>public</strong>, we will be able to change the value of this variable on the fly once we're back in the Editor.</li>
</ul>
</li>
<li><em>public Vector2 move</em>
<ul>
<li>If you remember from earlier, our movement (inside our action map) is strictly in 2 directions (that's what we want). We limited our key bindings to Vector2.</li>
<li>Thus, when we read our player's movements, they will be in a <strong>2D vector</strong> and will be placed inside an object of type <strong>Vector2</strong></li>
</ul>
</li>
<li><em>public Vector3 movement</em>
<ul>
<li>Since our game world is a <strong>3D space</strong>, we need to translate our 2-dimensional movement into a 3D vector w/ the y-axis (straight up) set to 0. Which is why we need this variable.
<ul>
<li>Bonus question: why would we set the y-axis to 0 in our 3D vector?</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_22_fixed.png" alt="Unity Editor Home Page">
<ol start="15">
<li>
<p>Add the following function after <em>Update()</em>:</p>
<ul>
<li>
<p>public void OnMove(InputAction.CallbackContext context) {
move = context.ReadValue&lt; Vector 2 &gt;();
}</p>
</li>
<li>
<p>You may also need to import the following library up top with this line:</p>
<ul>
<li><strong>using UnityEngine.InputSystem</strong>
<br/></li>
</ul>
</li>
<li>
<p>Imagine your player asset is a toy remote car:</p>
<ul>
<li>Your keyboard/controller is the remote.</li>
<li>Unity's Input System is the "messenger".</li>
<li>The function <em>OnMove</em> is the car receiving the message.</li>
<li>The <em>CallbackContext</em> is the message itself (the message that you send to the function upon a button press).
<ul>
<li>The message says what you (the person controlling the car) want the car to do.
<ul>
<li>Move? Move where? How fast? Is this gonna happen once or continuously?</li>
</ul>
</li>
</ul>
</li>
<li>In this case, the message is a 2D vector indicating which direction we want to move in.
<br/></li>
</ul>
</li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/Define_MovePlayer.png" alt="Unity Editor Home Page">
<ol start="16">
<li>
<p>Define <strong>MovePlayer()</strong> using the image above.</p>
<ul>
<li>We placed the <em>movement = new Vector3(move.x, 0f, move.y)</em> line
<ul>
<li>What does it mean?:
<ul>
<li>Consider the following example:
<ul>
<li>In a 2D space like the one below:
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_21.png" alt="Unity Editor Home Page"></li>
<li><strong>(0,1)</strong> would mean "move in the positive y axis" (i.e. upward)</li>
<li>But now, when we translate this 2 dimensional movement into a 3 dimensional world, we have to be careful.
<ul>
<li>The y-axis is now upwards (directly upwards). The newly added z-axis is the new "forward" axis. And the x-axis is still for left and right movement.</li>
</ul>
</li>
<li>So, when we map (0,1) from 2D to 3D, we would have to assign it like this (assume our 2D vector is called "move", like above, and our 3D vector is still "movement"):
<ul>
<li>movement = new Vector3(move.x, 0f, move.y);</li>
</ul>
</li>
<li>Why?
<ul>
<li>As stated earlier, we don't move upwards with WASD. We only move along the x and z axes.</li>
<li>Since our 2D vector is (0,1), our 3D translation of this 2D vector would be <strong>(0, 0f, 1)</strong>. Which means that we are now moving (in the 3D space) <strong>1 unit in the positive z-axis (AKA forward)</strong></li>
<li>Since this action is repeated every frame, in 60 fps gameplay, this will result in our character having smooth forward movement.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>We also placed a new line:
<strong>transform.Translate(movement * speed * Time.deltaTime, Space.World);</strong></li>
<li>What does this line mean?
<ul>
<li><em>transform</em>
<ul>
<li>Refers directly to this game object's <strong>Transform</strong> attribute.</li>
</ul>
</li>
<li><em>.Translate</em>
<ul>
<li>Allows us to move the object from its current position.</li>
</ul>
</li>
<li><em>movement * speed * time.DeltaTime</em>.
<ul>
<li>We multiply our speed value by our movement vector (so that we're not at a speed of 1 unit per frame).</li>
<li>This vector is then continuously added to the game object's position vector to move it.</li>
</ul>
</li>
<li><em>time.deltaTime</em>
<ul>
<li>What is that?</li>
<li>This allows our player movement to be <strong>frame-independent</strong>.
<ul>
<li>Imagine that your computer runs the game at 60 fps (frames per second).</li>
<li>We can calculate the total # of units moved by the player by doing the following calculation:
<ul>
<li>60 * 5 (our speed, let's say) * movement ([0, 0, 1], let's say)</li>
<li>Thus, we moved <strong>300 units</strong> in total</li>
</ul>
</li>
<li>Let's assume your friend's PC runs the game at 120 fps.
<ul>
<li>Then, by the same calculation (with the same movement), we'd move <strong>600 units</strong> in total when the game runs on their PC.
<ul>
<li>That's not good! This means that the higher the FPS is, the faster we move.</li>
</ul>
</li>
</ul>
</li>
<li>This is why we multiply this entire expression by <strong>time.deltaTime</strong> (whose value is roughly equal to 1/your fps amount).
<ul>
<li>60 * 1/60 = 1</li>
<li>120 * 1/120 = 1.
<ul>
<li>Therefore, our movement stays <strong>consistent</strong> across different machines (since we're just multiplying by 1).</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><em>Space.World</em>
<ul>
<li>This allows our player object to move relative to the <strong>game world's global axes.</strong></li>
<li>This means that, regardless of where the game object is or what direction it's facing or what orientation the camera is in, when we press "W", we will always move in the direction of the <strong>game world's</strong> positive z-axis.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<h4 id="now-lets-go-back-to-the-unity-editor"><a class="header" href="#now-lets-go-back-to-the-unity-editor">Now, let's go back to the Unity Editor.</a></h4>
<br/>
<ol start="17">
<li>
<p>Click on the <strong>jearl_backwards</strong> (either in the Scene Panel on the left or in the Scene itself) asset to view its components.</p>
</li>
<li>
<p>In the <strong>Player Input</strong> component, find the <strong>Behavior</strong> attribute.</p>
</li>
<li>
<p>Change its value from <strong>Send Messages</strong> to <strong>Invoke Unity Events</strong>.</p>
</li>
<li>
<p>Right underneath, click and open the <strong>Events</strong> dropdown.
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_90.png" alt="Unity Editor Home Page"></p>
</li>
<li>
<p>Click and expand the <strong>Player</strong> dropdown</p>
</li>
<li>
<p>If the previous steps were followed correctly, you should see a box labeled <strong>Movement (CallbackContext)</strong></p>
</li>
<li>
<p>Click the <strong>Plus</strong> icon at the bottom right of the box.</p>
</li>
<li>
<p>In the blank attribute, drag and drop the <strong>jearl_backwards</strong> asset into it.</p>
</li>
<li>
<p>Open the <strong>No Function</strong> dropdown</p>
</li>
<li>
<p>Again, if the previous steps were followed and you <strong>saved</strong> your script, you should see an option called <strong>Player_Movement</strong> (which is the name of one of the functions we created in our movement script)</p>
<ul>
<li>Click and expand it</li>
</ul>
</li>
<li>
<p>In the following menu, at the top, you should see <strong>OnMove</strong> (which is our Input function for movement)</p>
<ul>
<li>Click it.</li>
</ul>
</li>
<li>
<p>What all this did is assign the <strong>OnMove</strong> CallbackContext function to our player object. Now, whenever we press WASD (buttons associated with <strong>movement</strong>), those key inputs will be read and sent to this function.</p>
</li>
</ol>
<h4 id="fatal-error-this-is-me-from-a-couple-minutes-in-the-future-i-just-realized-that-i-placed-down-the-assets-in-the-wrong-way-if-youve-been-following-this-tutorial-when-you-ran-the-game-your-player-is-likely-moving-in-the-complete-opposite-directions"><a class="header" href="#fatal-error-this-is-me-from-a-couple-minutes-in-the-future-i-just-realized-that-i-placed-down-the-assets-in-the-wrong-way-if-youve-been-following-this-tutorial-when-you-ran-the-game-your-player-is-likely-moving-in-the-complete-opposite-directions">Fatal error (this is me from a couple minutes in the future). I just realized that I placed down the assets in the wrong way. If you've been following this tutorial, when you ran the game, your player is likely moving in the complete opposite directions.</a></h4>
<h4 id="fix-swap-the-positions-of-your-motor_oil-and-jearl_backwards-assets-and-also-turn-the-camera-so-it-is-properly-oriented-and-centered-on-our-player-the-blue-axis-should-be-facing-away-from-the-camera-like-this"><a class="header" href="#fix-swap-the-positions-of-your-motor_oil-and-jearl_backwards-assets-and-also-turn-the-camera-so-it-is-properly-oriented-and-centered-on-our-player-the-blue-axis-should-be-facing-away-from-the-camera-like-this">Fix: Swap the positions of your <em>motor_oil</em> and <em>jearl_backwards</em> assets and also turn the camera so it is properly oriented and centered on our player (the blue axis should be facing away from the camera). Like this:</a></h4>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_89.png" alt="Unity Editor Home Page">
<p><br/><br/></p>
<h4 id="run-the-game-and-you-should-be-able-to-move-but-youll-notice-that-the-player-is-stiff-hes-always-looking-in-the-same-direction-lets-change-that-so-that-the-player-looks-in-the-direction-that-were-moving-in"><a class="header" href="#run-the-game-and-you-should-be-able-to-move-but-youll-notice-that-the-player-is-stiff-hes-always-looking-in-the-same-direction-lets-change-that-so-that-the-player-looks-in-the-direction-that-were-moving-in">Run the game and you should be able to move! But, you'll notice that the player is "stiff". He's always looking in the same direction. Let's change that so that the player looks in the direction that we're moving in!</a></h4>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_23.png" alt="Unity Editor Home Page">
<ol start="29">
<li>Back in our script, add the following line inside the <strong>MovePlayer</strong>:
<ul>
<li><em>transform.rotation = Quaternion.Slerp(transform.rotation, Quaternion.LookRotation(movement), 0.1f);</em></li>
<li>What does this mean?:
<ul>
<li><em>transform.rotation</em>
<ul>
<li>Now, we're accessing this game object's rotation characteristic (before, it was translation)</li>
</ul>
</li>
<li><em>Quaternion.Slerp(...)</em>
<ul>
<li>In mathematics, <strong>Quaternions</strong> are objects that are used to represent rotations in a 3D space</li>
<li>The function <em>.Slerp()</em> takes two such quaternions and interpolates (or transitions) between them with a given strength (indicated by a floating-point number).</li>
</ul>
</li>
<li><em>(transform.rotation, Quaternion.LookRotation(movement), 0.15f)</em>
<ul>
<li>Here, our two quaternions are:
<ul>
<li><em>transform.rotation</em>
<ul>
<li>This object's current rotation</li>
</ul>
</li>
<li><em>Quaternion.LookRotation(movement)</em>
<ul>
<li>The rotation that's required to face in the direction of the given 3D vector (we used the Quaternion class's built-in function, LookRotation, to achieve this)</li>
</ul>
</li>
<li><em>0.1f</em>
<ul>
<li>We transition between these two rotations with a strength of 0.1 (which is slow enough to see the transition)
<ul>
<li>Our game object will smoothly transition between rotations (instead of snapping) when we press WASD.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="now-when-you-go-back-to-the-editor-let-the-new-script-update-and-hit-play-you-should-see-movement-and-the-player-object-rotate-ie-look-in-the-direction-of-the-movement-isnt-that-cool"><a class="header" href="#now-when-you-go-back-to-the-editor-let-the-new-script-update-and-hit-play-you-should-see-movement-and-the-player-object-rotate-ie-look-in-the-direction-of-the-movement-isnt-that-cool">Now, when you go back to the Editor, let the new script update, and hit Play, you should see movement and the player object rotate (i.e. look) in the direction of the movement. Isn't that cool?</a></h4>
<h4 id="now-lets-add-some-jumping-functionality"><a class="header" href="#now-lets-add-some-jumping-functionality">Now, let's add some jumping functionality</a></h4>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_24.png" alt="Unity Editor Home Page">
<ol start="30">
<li>Open the <strong>Player_Control</strong> action map. Then, right click on the "Player" action map and hit <em>Add Action</em>.
<br/></li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_25.png" alt="Unity Editor Home Page">
<ol start="31">
<li>Click once on the newly created action, press <code>Enter</code>, and rename it to <strong>Jump</strong>.
<ul>
<li>Also, in the right-hand panel, ensure that the <em>Action Type</em> attribute for this action is <strong>button</strong> (we will press the jump button once to jump. not hold it)
<br/></li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_26.png" alt="Unity Editor Home Page">
<ol start="32">
<li>In the middle panel, next to <strong>Jump</strong>, click the triangle to view its contents.
<ul>
<li>Click on <strong>&lt; No Binding &gt;</strong>.</li>
<li>Over to the right, open the <em>Path</em> dropdown and either search for the <strong>Spacebar</strong> key or use the <em>Listen</em> feature (like earlier).</li>
<li>Select Spacebar from the search results to assign it to the empty key binding.</li>
<li>Make sure to click <strong>Save Asset</strong> in the top right.
<br/></li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_27.png" alt="Unity Editor Home Page">
<ol start="33">
<li>Back in our Scene View, click on <strong>jearl_backwards</strong> to access its components
<ul>
<li>Click on <em>Add Component</em> and, in the search bar, start typing <strong>Rigidbody</strong>. You should see it in the search results.</li>
<li>Click on <strong>Rigidbody</strong> to add it to our player object</li>
<li>What's the point?
<ul>
<li>This component enables our player object to now be affected by physics (i.e. gravity)</li>
<li>Without this, our jump functionality would not work and be very wonky
<br/></li>
</ul>
</li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_28.png" alt="Unity Editor Home Page">
<ol start="34">
<li>Inside of the Rigidbody component, under the <em>Constraints</em> dropdown, check the boxes for the X and Z axes for <strong>Freeze Rotation</strong>
<ul>
<li>Why?
<ul>
<li>This will prevent unwanted rotations or leaning when our player interacts with or collides with any uneven surfaces.</li>
<li>Locking these two axes ensures that our jump force is only applied to the y-axis (directly up) and nowhere else.
<br/></li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="lets-make-a-few-changes-to-our-script"><a class="header" href="#lets-make-a-few-changes-to-our-script">Let's make a few changes to our script</a></h4>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_29.png" alt="Unity Editor Home Page">
<ol start="35">
<li>Add the following three variables up top:
<ul>
<li><em>Rigidbody rb;</em></li>
<li><em>public bool isGrounded;</em></li>
<li><em>public float jumpStrength = 7f;</em>
<br/></li>
<li>Let's take a look at these:
<ul>
<li><em>Rigidbody rb;</em>
<ul>
<li>This will hold the Rigidbody component of this object (the object that this script is attached to). Which will allow us to add forces to it later</li>
</ul>
</li>
<li><em>public bool isGrounded;</em>
<ul>
<li>This ensures that we can only jump again once we have landed (and not at any other time)</li>
<li>Simply relying on collisions can cause some errors.</li>
<li>Without this check, we could either fall through the ground or keep jumping up forever and never land.</li>
</ul>
</li>
<li><em>public float jumpStrength = 7f;</em>
<ul>
<li>Self-explanatory. Allows us to tweak the strength of our jump (we can also give custom values in the editor itself)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_30.png" alt="Unity Editor Home Page">
<ol start="36">
<li>Underneath our <em>OnMove</em> function, add this function.
<ul>
<li>The syntax is mostly the same except for one key difference...
<ul>
<li><strong>context.performed</strong>
<ul>
<li>Remember, we are not pressing and holding the jump button. This is a one-and-done type of action</li>
<li>Therefore, we do not need to constantly read a value from the action map (like <em>OnMove</em>)
<ul>
<li>We just need to check, once, whether or not we received a context (message) from our key binding (the jump button)
<ul>
<li>If we did, we print a message to the console
<br/></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_31.png" alt="Unity Editor Home Page">
<ol start="37">
<li>Add the <em>if</em> statement that you see up above <strong>inside</strong> our earlier <em>if</em> statement.
<ul>
<li>What does this even mean?:
<ul>
<li>
<p>We <strong>nested</strong> this addition inside of our <em>context.performed</em> if statement.</p>
<ul>
<li>This ensures that if we press the jump button while the player object is airborne, we won't add more force to the player (i.e. double jump)
<ul>
<li>Not necessarily a bad thing. Feel free to implement this later if you want to.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>if (isGrounded) {...}</em></p>
<ul>
<li>If isGrounded is true (i.e. we are on the ground)</li>
</ul>
</li>
<li>
<p><em>rb.AddForce(Vector3.up * jumpStrength, ForceMode.Impulse)</em></p>
<ul>
<li>We will add an impulse force (instantaneous force) to our Rigidbody component, which will, in turn, affect the player object.</li>
<li>This force will be equal to the 3D up vector (whose value is (0, 1, 0)) multiplied by our jump strength.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_32.png" alt="Unity Editor Home Page">
<ol start="38">
<li>In our <em>Start</em> function, add the above line
<ul>
<li>This allows us to actually access and store this object's Rigidbody component inside of our variable to use in our script.</li>
<li>We placed this inside <em>Start()</em> so that this action is only performed once. We access the Rigidbody component once, store it, and that's it.</li>
<li>EDIT (This is me from the future) --&gt; Change this line from <strong>rb.GetComponent...</strong> to <strong>rb = GetComponent...</strong></li>
</ul>
</li>
</ol>
<br/>
<h4 id="but-how-can-we-actually-check-if-the-object-has-even-landed-to-then-enable-it-to-jump-again"><a class="header" href="#but-how-can-we-actually-check-if-the-object-has-even-landed-to-then-enable-it-to-jump-again">But, how can we actually check if the object has even landed to then enable it to jump again?</a></h4>
<h4 id="the-answer-with-collisions"><a class="header" href="#the-answer-with-collisions">The answer? With <em>collisions</em></a></h4>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_33.png" alt="Unity Editor Home Page">
<ol start="39">
<li>
<p>Add the following function below our <em>OnJump</em> function.</p>
<ul>
<li>Do note that this is a built-in function that we are simply overwriting.</li>
<li>Intellisense and autocomplete should kick in as soon as you start typing the function name.</li>
<li>Upon any collision, Unity, by default, calls this method. The physics engine is fast enough to even call this multiple times per frame.</li>
</ul>
</li>
</ol>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_34.png" alt="Unity Editor Home Page">
<ol start="40">
<li>Add the following <em>if</em> statement to the function body.
<ul>
<li>What does this mean?
<ul>
<li><em>Debug.Log(...)</em>
<ul>
<li>This is here to ensure that a). a collision occurred and b). it occurred with the correct object.</li>
</ul>
</li>
<li><em>if (collision.gameObject.CompareTag("Ground")) {</em>
<ul>
<li>When a collision occurs, the collision variable in our method signature will be given information about the collision.
<ul>
<li>The <em>"collision."</em> refers to the collision that just occurred.</li>
<li>The <em>".gameObject"</em> refers to the other object that <strong>this</strong> object collided with</li>
<li>The <em>.CompareTag</em> checks if that other object held a tag of "Ground" (we'll go over what this is in just a little bit).</li>
</ul>
</li>
<li>So, if the other object in the collision that just happened with our object is tagged with the tag "Ground", then...
<ul>
<li>We set <em>isGrounded</em> to true (i.e. we have landed).</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_36.png" alt="Unity Editor Home Page">
<ol start="41">
<li>
<p>Let's add a tag to our <strong>Plane</strong> game object.</p>
<ul>
<li>Back in the Editor, click the <strong>Plane</strong> object to view its components.</li>
<li>In the Component Panel (on the right), up top (underneath the object's name), find the <strong>Tag</strong> attribute.</li>
<li>Click the dropdown menu next to it to expand it.</li>
<li>Click <strong>Add Tag...</strong></li>
<li>In the new window, click the <strong>plus</strong> icon.</li>
<li>Name your tag <strong>Ground</strong> (name it EXACTLY the name we used in our if statement in the collision function in our script).</li>
<li>Click <strong>Save</strong>.</li>
<li>Click on the <strong>Plane</strong> ground object to see its components. Again.</li>
<li>Find the <strong>Tag</strong> attribute and the dropdown.</li>
<li>Open the dropdown and you should see your newly created tag in the list.</li>
<li>Click it to assign it to this object.
<ul>
<li>Unity does <strong>NOT</strong> do this automatically. So, don't forget this step!
<br/></li>
</ul>
</li>
</ul>
</li>
<li>
<p>You remember earlier when we configured the <strong>OnMove</strong> function in our <strong>Player Input</strong> script? This time, we need to do the exact same thing, but for the <strong>OnJump</strong> function!</p>
<ul>
<li>Click on <strong>jearl_backwards</strong> to view its components.</li>
<li>In the <strong>Player Input</strong> script, open the <strong>Events</strong> dropdown (same as before).</li>
<li>Open the <strong>Player</strong> dropdown.</li>
<li>If you see a new box labeled <strong>Jump (CallbackContext)</strong>, repeat the same steps as before:
<ul>
<li>Click the <strong>plus</strong> icon</li>
<li>Drag our player object into the empty box below <strong>Runtime</strong></li>
<li>In the bigger dropdown, find our movement function.</li>
<li>Open it.</li>
<li>You should see an option for <strong>OnJump</strong></li>
<li>Click that and you're good.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Make sure to add a <strong>Box Collider</strong> component to your game object. The process is that same as any other component. Simply add it and that's it.</p>
</li>
</ol>
<h4 id="so-now-assuming-everything-was-set-up-correctly-upon-running-our-game-you-should-be-able-to-move-and-jump"><a class="header" href="#so-now-assuming-everything-was-set-up-correctly-upon-running-our-game-you-should-be-able-to-move-and-jump">So now, assuming everything was set up correctly, upon running our game, you should be able to move AND jump!</a></h4>
<h4 id="now-for-a-final-touch-before-moving-on-to-animations-lets-fix-the-position-of-our-camera"><a class="header" href="#now-for-a-final-touch-before-moving-on-to-animations-lets-fix-the-position-of-our-camera">Now, for a final touch (before moving on to animations), let's fix the position of our camera</a></h4>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_37.png" alt="Unity Editor Home Page">
<ol start="43">
<li>Let's make a new script for our <em>Main Camera</em> object
<ul>
<li>Click on the <strong>Main Camera</strong> to open its Component view on the right side.</li>
<li>At the bottom, click <em>Add Component</em> and type in the box <em>New Script</em></li>
<li>Let's name the script <em>Player_Follow</em></li>
<li>Once created, double-click to open it.</li>
</ul>
</li>
</ol>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_38.png" alt="Unity Editor Home Page">
<ol start="44">
<li>Let's add the following variables first:
<ul>
<li>What do they mean?:
<ul>
<li><em>public Transform player;</em>
<ul>
<li>We will need this later to hold information about our player object (we'll just click and drag our player object into this variable in our Editor later).</li>
</ul>
</li>
<li><em>public Vector3 offset = new Vector3(...)</em>
<ul>
<li>This is the three dimensional position that the camera will be locked at.</li>
<li>Note: These are coordinates that I decided to use after a bit of trial and error (I just like how the camera sits at this position).
<ul>
<li>You can experiment yourself to find the location that you find better.</li>
<li>Move the camera to that position. Then, just copy its <em>Position</em> values (from <strong>Transform</strong>) into this Vector3 variable.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<img style="display: block; margin-left: auto; margin-right: auto;" src="./groundwork_photos/step_39.png" alt="Unity Editor Home Page">
<ol start="45">
<li>Now, we'll add the lines up above into the <em>Update()</em> method
<ul>
<li>What does this mean?
<ul>
<li><em>transform.position = player.position + offset;</em>
<ul>
<li>We're gonna take the position of this game object (the object that this script is attached to) and add to its position (which is in three dimensions) the position of the offset that we set up above.</li>
</ul>
</li>
<li><em>transform.LookAt(player);</em>
<ul>
<li>This line will apply a rotation to this game object (the camera) that will ensure that its forward vector (the z-axis vector) is pointing directly at the specified game object (which we'll set to our player object in the Unity Editor).</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<h4 id="now-when-you-return-to-the-unity-editor-and-look-at-the-main-cameras-components-make-sure-to-drag-jearl_backwards-into-the-empty-slot-next-to-the-player-variable-run-the-game-and-see-if-the-camera-is-attached-to-the-player-object"><a class="header" href="#now-when-you-return-to-the-unity-editor-and-look-at-the-main-cameras-components-make-sure-to-drag-jearl_backwards-into-the-empty-slot-next-to-the-player-variable-run-the-game-and-see-if-the-camera-is-attached-to-the-player-object">Now, when you return to the Unity Editor and look at the Main Camera's components, make sure to drag <em>jearl_backwards</em> into the empty slot next to the <em>Player</em> variable. Run the game and see if the camera is attached to the player object.</a></h4>
<h2 id="we-are-now-finished-with-the-input-configuration-next-we-will-add-animations-to-the-player-object"><a class="header" href="#we-are-now-finished-with-the-input-configuration-next-we-will-add-animations-to-the-player-object">We are now finished with the input configuration. Next, we will add animations to the player object</a></h2>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../unity/groundwork.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../unity/IDE_setup/VSCode_setup.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../unity/groundwork.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../unity/IDE_setup/VSCode_setup.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
